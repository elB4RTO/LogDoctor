<!DOCTYPE html>
<html lang="en_US">
  <head>
    <meta charset="utf-8">
    <title>LogDoctor - Help</title>
    <style type="text/css">
      body {
        color: $TXT$;
        font-size: 23px;
        background-color: $BG$;
      }
      h1 {
        color: $IP$;
      }
      h2 {
        color: $BG$;
        background-color: $UA$;
      }
      h3 {
        color: $T$;
      }
      th,td {
        padding: 20px;
      }
      code {
        color: $PT$;
        font-size: 21px;
        padding-left:16px
      }
    </style>
  </head>
  <body>

    <h1 align="center">IIS</h1>
    <br>
    <h2 align="center">Access logs format string</h2>
    <br>
    <h3>Configuration</h3>
    <br>
    <p>The configuration file should be located at:</p><br>
      <code>C:\inetpub\logs\LogFiles\&lt;YourSiteName&gt;</code>
    <br>
    <p>Access logs can be configured from the <i>IIS Manager</i>.<br>
    To open the IIS Manager, go to <code>Control panel</code><i>→</i><code>Administrative tools</code><i>→</i><code></code><i>→</i><code>Internet Informations Service (IIS) Manager</code>.<br>
    Once inside, click on <code>Logging</code> to edit the logs settings.</p>
    <br>
    <br>
    <h3>Logs format modules</h3>
    <br>
    <p>Available logs formats (supported by LogDoctor) are:</p>
    <br>
    <ul>
      <li style="padding-bottom:10px"><i>IIS</i></li><br>
        <p>Comma-separated values, can't be customized further. The file name is usually something like <code>u_in&lt;DATE&gt;.log</code></p>
      <br>
      <li style="padding-bottom:10px"><i>NCSA</i></li><br>
        <p>Whitespace-separated values, can't be customized further. The file name is usually something like <code>u_nc&lt;DATE&gt;.log</code></p>
      <br>
      <li style="padding-bottom:10px"><i>W3C</i></li><br>
        <p>Whitespace-separated values, can be customized by selecting which fields to log. The file name is usually something like <code>u_ex&lt;DATE&gt;.log</code></p>
    </ul>
    <br>
    <br>
    <h3>Suggested logs format</h3>
    <br>
    <p>The suggested logs module is the <i>W3C</i> format, which will allow using the complete set of functionalities of LogDoctor.</p>
    <p>The suggested fields to use are the following:</p><br>
      <code>date</code>, <code>time</code>, <code>cs-method</code>, <code>cs-uri-stem</code>, <code>cs-uri-query</code>, <code>c-ip</code>, <code>cs-version</code>, <code>cs(User-Agent)</code>, <code>cs(Cookie)</code>, <code>cs(Referer)</code>, <code>sc-status</code>, <code>sc-bytes</code>, <code>cs-bytes</code>, <code>time-taken</code>
    <br>
    <br>
    <h3>Logs format strings</h3>
    <br>
    <p>Both the <i>IIS</i> and <i>NCSA</i> modules are standard, and thus LogDoctor doesn't need the <i>format string</i> to be specified.<br>
    The <i>W3C</i> module can be customized and so a <i>format string</i> must be specified. It can be found insed any log file created using this format module, searching the line starting with <code>#Fields:</code>.</p>
    <br>
    <br>
    <br>
    <h2 align="center">W£C logs format fields</h2>
    <br>
    <h3>Fields considered by LogDoctor</h3>
    <br>
    <p>Only the following fields will be considered, meaning that only these fields' data will be stored and used for the statistics.</p>
    <br>
    <table border="1" width="100%">
      <tr><th style="width:150px">Code</th><th>Informations</th></tr>
      <tr>
        <td align="center">date</td>
        <td>The date on which the activity occurred <i>(UTC)</i>.</td>
      </tr>
      <tr>
        <td align="center">time</td>
        <td>The time at which the activity occurred <i>(UTC)</i>.</td>
      </tr>
      <tr>
        <td align="center">cs-version</td>
        <td>The request protocol <i>(HTTP/v, HTTPS/v)</i>.</td>
      </tr>
      <tr>
        <td align="center">cs-method</td>
        <td>The request method <i>(GET, POST, HEAD, ...)</i>.</td>
      </tr>
      <tr>
        <td align="center">cs-uri-stem</td>
        <td>The URI path requested, not including any query string.</td>
      </tr>
      <tr>
        <td align="center">cs-uri-query</td>
        <td>Query string (if any).</td>
      </tr>
      </tr>
      <tr>
        <td align="center">sc-status</td>
        <td>HTTP status code.</td>
      </tr>
      <tr>
        <td align="center">cs-bytes</td>
        <td>The number of bytes received and processed by the server.</td>
      </tr>
      <tr>
        <td align="center">sc-bytes</td>
        <td>The number of bytes sent back by the server.</td>
      </tr>
      <tr>
        <td align="center">time-taken</td>
        <td>Time taken to serve the request, in milliseconds</td>
      </tr>
      <tr>
        <td align="center">cs(Referer)</td>
        <td>The site which provided a link to the current site.</td>
      </tr>
      <tr>
        <td align="center">cs(Cookie)</td>
        <td>The content of the cookie sent or received (if any).</td>
      </tr>
      <tr>
        <td align="center">cs(User-Agent)</td>
        <td>Web-browser or bot identification string</td>
      </tr>
      <tr>
        <td align="center">c-ip</td>
        <td>The IP address of the client that made the request.</td>
    </table>
    <br>
    <br>
    <h3>Fields discarded by LogDoctor</h3>
    <br>
    <p>Any field than the ones above won't be considered by LogDoctor.<br>
    When generating a <i>log sample</i>, these fields will appear as '<b>DISCARDED</b>'.<br>
    If you aint using logs for any other purpose, please remove unnecessary fields to make the process faster and reduce the possibility of errors.</p>
    <br>
    <br>
    <h3>References</h3>
    <br>
    <ul>
      <li>Configure IIS logging:<br>
        <i style="color:$REQ$">https://docs.microsoft.com/en-us/iis/manage/provisioning-and-managing-iis/configure-logging-in-iis</i></li><br>
      <li>Logs format modules overview:<br>
        <i style="color:$REQ$">https://docs.microsoft.com/en-us/previous-versions/iis/6.0-sdk/ms525807(v=vs.90)</i></li>
      <li>The W3C log format:<br>
        <i style="color:$REQ$">https://docs.microsoft.com/en-us/windows/win32/http/w3c-logging</i></li>
    </ul>
    <br>
    <br>
    <br>
  </body>
</html>
